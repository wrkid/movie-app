{"ast":null,"code":"export default class ApiService {\n  constructor() {\n    this._apiBase = `https://api.themoviedb.org/3/search/movie?query=`;\n    this._options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNTZmMTZkYTdhYzUwNmY2NWEzYTIxZmYyZTY3MWMzMCIsInN1YiI6IjY1MjgwNmUzMWYzZTYwMDBmZjg0N2JkZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.eCyuatovTMylls3DwByDpOX5YNu5nQhE6wZmhggwJIs'\n      }\n    };\n  }\n  async getResource(url) {\n    const res = await fetch(url, this._options);\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n    return res.json();\n  }\n  async getMovie(url) {\n    const res = await fetch(url, this._options);\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n    return res.json();\n  }\n  async getAllMovies(movieName = '#', page = 1) {\n    const result = await this.getResource(`${this._apiBase}${movieName}&page=${page}`).then(res => res);\n    return result;\n  }\n  async getMovieById(id) {\n    const result = await this.getMovie(!URL(id)).then(res => res);\n    return result;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async addRatedFilm(id) {\n    const prevItems = localStorage.getItem('ratedFilms');\n    if (!prevItems) {\n      const newItems = [id];\n      localStorage.setItem('ratedFilms', newItems);\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getRatedFilms() {\n    const items = localStorage.getItem('ratedFilms');\n    if (!items) {\n      return {};\n    }\n    let result = [];\n    result = items.map(id => this.getMovieById(id));\n    return result;\n  }\n}","map":{"version":3,"names":["ApiService","constructor","_apiBase","_options","method","headers","accept","Authorization","getResource","url","res","fetch","ok","Error","status","json","getMovie","getAllMovies","movieName","page","result","then","getMovieById","id","URL","addRatedFilm","prevItems","localStorage","getItem","newItems","setItem","getRatedFilms","items","map"],"sources":["/Users/w.k/Documents/git/movie-app/src/components/ApiService/api-service.jsx"],"sourcesContent":["export default class ApiService {\n  _apiBase = `https://api.themoviedb.org/3/search/movie?query=`;\n\n  _options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNTZmMTZkYTdhYzUwNmY2NWEzYTIxZmYyZTY3MWMzMCIsInN1YiI6IjY1MjgwNmUzMWYzZTYwMDBmZjg0N2JkZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.eCyuatovTMylls3DwByDpOX5YNu5nQhE6wZmhggwJIs',\n    },\n  };\n\n  async getResource(url) {\n    const res = await fetch(url, this._options);\n\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  async getMovie(url) {\n    const res = await fetch(url, this._options);\n\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  async getAllMovies(movieName = '#', page = 1) {\n    const result = await this.getResource(`${this._apiBase}${movieName}&page=${page}`).then(\n      (res) => res,\n    );\n    return result;\n  }\n\n  async getMovieById(id) {\n    const result = await this.getMovie(!URL(id)).then(\n      (res) => res\n    );\n\n    return result;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async addRatedFilm(id) {\n    const prevItems = localStorage.getItem('ratedFilms');\n    if (!prevItems) {\n      const newItems = [id];\n      localStorage.setItem('ratedFilms', newItems)\n    } \n    \n  } \n\n  // eslint-disable-next-line class-methods-use-this\n  async getRatedFilms() {\n    const items = localStorage.getItem('ratedFilms');\n    if (!items) {\n      return {};\n    }\n    let result = [];\n    result = items.map(id => this.getMovieById(id))\n    return result;\n  } \n}\n"],"mappings":"AAAA,eAAe,MAAMA,UAAU,CAAC;EAAAC,YAAA;IAAA,KAC9BC,QAAQ,GAAI,kDAAiD;IAAA,KAE7DC,QAAQ,GAAG;MACTC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACPC,MAAM,EAAE,kBAAkB;QAC1BC,aAAa,EACX;MACJ;IACF,CAAC;EAAA;EAED,MAAMC,WAAWA,CAACC,GAAG,EAAE;IACrB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE,IAAI,CAACN,QAAQ,CAAC;IAE3C,IAAI,CAACO,GAAG,CAACE,EAAE,EAAE;MACX,MAAM,IAAIC,KAAK,CAAE,kBAAiBJ,GAAI,eAAcC,GAAG,CAACI,MAAO,EAAC,CAAC;IACnE;IAEA,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;EACnB;EAEA,MAAMC,QAAQA,CAACP,GAAG,EAAE;IAClB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE,IAAI,CAACN,QAAQ,CAAC;IAE3C,IAAI,CAACO,GAAG,CAACE,EAAE,EAAE;MACX,MAAM,IAAIC,KAAK,CAAE,kBAAiBJ,GAAI,eAAcC,GAAG,CAACI,MAAO,EAAC,CAAC;IACnE;IAEA,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;EACnB;EAEA,MAAME,YAAYA,CAACC,SAAS,GAAG,GAAG,EAAEC,IAAI,GAAG,CAAC,EAAE;IAC5C,MAAMC,MAAM,GAAG,MAAM,IAAI,CAACZ,WAAW,CAAE,GAAE,IAAI,CAACN,QAAS,GAAEgB,SAAU,SAAQC,IAAK,EAAC,CAAC,CAACE,IAAI,CACpFX,GAAG,IAAKA,GACX,CAAC;IACD,OAAOU,MAAM;EACf;EAEA,MAAME,YAAYA,CAACC,EAAE,EAAE;IACrB,MAAMH,MAAM,GAAG,MAAM,IAAI,CAACJ,QAAQ,CAAC,CAACQ,GAAG,CAACD,EAAE,CAAC,CAAC,CAACF,IAAI,CAC9CX,GAAG,IAAKA,GACX,CAAC;IAED,OAAOU,MAAM;EACf;;EAEA;EACA,MAAMK,YAAYA,CAACF,EAAE,EAAE;IACrB,MAAMG,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IACpD,IAAI,CAACF,SAAS,EAAE;MACd,MAAMG,QAAQ,GAAG,CAACN,EAAE,CAAC;MACrBI,YAAY,CAACG,OAAO,CAAC,YAAY,EAAED,QAAQ,CAAC;IAC9C;EAEF;;EAEA;EACA,MAAME,aAAaA,CAAA,EAAG;IACpB,MAAMC,KAAK,GAAGL,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,IAAI,CAACI,KAAK,EAAE;MACV,OAAO,CAAC,CAAC;IACX;IACA,IAAIZ,MAAM,GAAG,EAAE;IACfA,MAAM,GAAGY,KAAK,CAACC,GAAG,CAACV,EAAE,IAAI,IAAI,CAACD,YAAY,CAACC,EAAE,CAAC,CAAC;IAC/C,OAAOH,MAAM;EACf;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}