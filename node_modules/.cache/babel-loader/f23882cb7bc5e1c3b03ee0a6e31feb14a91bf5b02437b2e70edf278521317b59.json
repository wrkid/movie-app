{"ast":null,"code":"export default class ApiService {\n  constructor() {\n    this._apiBase = `https://api.themoviedb.org/3/search/movie?query=`;\n    this._options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNTZmMTZkYTdhYzUwNmY2NWEzYTIxZmYyZTY3MWMzMCIsInN1YiI6IjY1MjgwNmUzMWYzZTYwMDBmZjg0N2JkZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.eCyuatovTMylls3DwByDpOX5YNu5nQhE6wZmhggwJIs'\n      }\n    };\n    this._testResult = {\n      page: 1,\n      results: [{\n        id: 268,\n        original_title: \"Batman\",\n        overview: \"Batman must face his most ruthless nemesis when a deformed madman calling himself \\\"The Joker\\\" seizes control of Gotham's criminal underworld.\",\n        poster_path: \"/cij4dd21v2Rk2YtUQbV5kW69WB2.jpg\",\n        release_date: \"1989-06-21\",\n        title: \"Batman\",\n        vote_average: 7.215\n      }]\n    };\n  }\n  async getResource(url) {\n    const res = await fetch(url, this._options);\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n    return res.json();\n  }\n  async getMovie(url) {\n    const res = await fetch(url, this._options);\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n    return res.json();\n  }\n  async getAllMovies(movieName = '#', page = 1) {\n    const result = await this.getResource(`${this._apiBase}${movieName}&page=${page}`).then(res => res);\n    return result;\n  }\n  async getMovieById(id) {\n    const result = await this.getMovie(!URL(id)).then(res => res);\n    return result;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async addRatedFilm(id) {\n    const prevItems = localStorage.getItem('ratedFilms');\n    if (!prevItems) {\n      const newItems = [id];\n      localStorage.setItem('ratedFilms', newItems);\n    } else {\n      const newItems = [...prevItems, id];\n      localStorage.setItem('ratedFilms', newItems);\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getRatedFilms() {\n    const items = localStorage.getItem('ratedFilms');\n    if (!items) {\n      return [];\n    }\n    let result = [];\n    result = items.map(id => this.getMovieById(id));\n    return result;\n  }\n}","map":{"version":3,"names":["ApiService","constructor","_apiBase","_options","method","headers","accept","Authorization","_testResult","page","results","id","original_title","overview","poster_path","release_date","title","vote_average","getResource","url","res","fetch","ok","Error","status","json","getMovie","getAllMovies","movieName","result","then","getMovieById","URL","addRatedFilm","prevItems","localStorage","getItem","newItems","setItem","getRatedFilms","items","map"],"sources":["/Users/w.k/Documents/git/movie-app/src/components/ApiService/api-service.jsx"],"sourcesContent":["export default class ApiService {\n  _apiBase = `https://api.themoviedb.org/3/search/movie?query=`;\n\n  _options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNTZmMTZkYTdhYzUwNmY2NWEzYTIxZmYyZTY3MWMzMCIsInN1YiI6IjY1MjgwNmUzMWYzZTYwMDBmZjg0N2JkZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.eCyuatovTMylls3DwByDpOX5YNu5nQhE6wZmhggwJIs',\n    },\n  };\n\n  _testResult = {\n    page: 1,\n    results: [\n      {\n        id: 268,\n        original_title: \"Batman\",\n        overview: \"Batman must face his most ruthless nemesis when a deformed madman calling himself \\\"The Joker\\\" seizes control of Gotham's criminal underworld.\",\n        poster_path: \"/cij4dd21v2Rk2YtUQbV5kW69WB2.jpg\",\n        release_date: \"1989-06-21\",\n        title: \"Batman\",\n        vote_average: 7.215\n      }, \n    ]\n  }\n\n  async getResource(url) {\n    const res = await fetch(url, this._options);\n\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  async getMovie(url) {\n    const res = await fetch(url, this._options);\n\n    if (!res.ok) {\n      throw new Error(`Couldn't fetch ${url}, recieved: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  async getAllMovies(movieName = '#', page = 1) {\n    const result = await this.getResource(`${this._apiBase}${movieName}&page=${page}`).then(\n      (res) => res,\n    );\n    return result;\n  }\n\n  async getMovieById(id) {\n    const result = await this.getMovie(!URL(id)).then(\n      (res) => res\n    );\n\n    return result;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async addRatedFilm(id) {\n    const prevItems = localStorage.getItem('ratedFilms');\n    if (!prevItems) {\n      const newItems = [id];\n      localStorage.setItem('ratedFilms', newItems)\n    } else {\n      const newItems = [...prevItems, id];\n      localStorage.setItem('ratedFilms', newItems);\n    }\n\n  } \n\n  // eslint-disable-next-line class-methods-use-this\n  async getRatedFilms() {\n    const items = localStorage.getItem('ratedFilms');\n    if (!items) {\n      return [];\n    }\n    let result = [];\n    result = items.map(id => this.getMovieById(id))\n    return result;\n  } \n}\n"],"mappings":"AAAA,eAAe,MAAMA,UAAU,CAAC;EAAAC,YAAA;IAAA,KAC9BC,QAAQ,GAAI,kDAAiD;IAAA,KAE7DC,QAAQ,GAAG;MACTC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACPC,MAAM,EAAE,kBAAkB;QAC1BC,aAAa,EACX;MACJ;IACF,CAAC;IAAA,KAEDC,WAAW,GAAG;MACZC,IAAI,EAAE,CAAC;MACPC,OAAO,EAAE,CACP;QACEC,EAAE,EAAE,GAAG;QACPC,cAAc,EAAE,QAAQ;QACxBC,QAAQ,EAAE,iJAAiJ;QAC3JC,WAAW,EAAE,kCAAkC;QAC/CC,YAAY,EAAE,YAAY;QAC1BC,KAAK,EAAE,QAAQ;QACfC,YAAY,EAAE;MAChB,CAAC;IAEL,CAAC;EAAA;EAED,MAAMC,WAAWA,CAACC,GAAG,EAAE;IACrB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE,IAAI,CAAChB,QAAQ,CAAC;IAE3C,IAAI,CAACiB,GAAG,CAACE,EAAE,EAAE;MACX,MAAM,IAAIC,KAAK,CAAE,kBAAiBJ,GAAI,eAAcC,GAAG,CAACI,MAAO,EAAC,CAAC;IACnE;IAEA,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;EACnB;EAEA,MAAMC,QAAQA,CAACP,GAAG,EAAE;IAClB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE,IAAI,CAAChB,QAAQ,CAAC;IAE3C,IAAI,CAACiB,GAAG,CAACE,EAAE,EAAE;MACX,MAAM,IAAIC,KAAK,CAAE,kBAAiBJ,GAAI,eAAcC,GAAG,CAACI,MAAO,EAAC,CAAC;IACnE;IAEA,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;EACnB;EAEA,MAAME,YAAYA,CAACC,SAAS,GAAG,GAAG,EAAEnB,IAAI,GAAG,CAAC,EAAE;IAC5C,MAAMoB,MAAM,GAAG,MAAM,IAAI,CAACX,WAAW,CAAE,GAAE,IAAI,CAAChB,QAAS,GAAE0B,SAAU,SAAQnB,IAAK,EAAC,CAAC,CAACqB,IAAI,CACpFV,GAAG,IAAKA,GACX,CAAC;IACD,OAAOS,MAAM;EACf;EAEA,MAAME,YAAYA,CAACpB,EAAE,EAAE;IACrB,MAAMkB,MAAM,GAAG,MAAM,IAAI,CAACH,QAAQ,CAAC,CAACM,GAAG,CAACrB,EAAE,CAAC,CAAC,CAACmB,IAAI,CAC9CV,GAAG,IAAKA,GACX,CAAC;IAED,OAAOS,MAAM;EACf;;EAEA;EACA,MAAMI,YAAYA,CAACtB,EAAE,EAAE;IACrB,MAAMuB,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IACpD,IAAI,CAACF,SAAS,EAAE;MACd,MAAMG,QAAQ,GAAG,CAAC1B,EAAE,CAAC;MACrBwB,YAAY,CAACG,OAAO,CAAC,YAAY,EAAED,QAAQ,CAAC;IAC9C,CAAC,MAAM;MACL,MAAMA,QAAQ,GAAG,CAAC,GAAGH,SAAS,EAAEvB,EAAE,CAAC;MACnCwB,YAAY,CAACG,OAAO,CAAC,YAAY,EAAED,QAAQ,CAAC;IAC9C;EAEF;;EAEA;EACA,MAAME,aAAaA,CAAA,EAAG;IACpB,MAAMC,KAAK,GAAGL,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,IAAI,CAACI,KAAK,EAAE;MACV,OAAO,EAAE;IACX;IACA,IAAIX,MAAM,GAAG,EAAE;IACfA,MAAM,GAAGW,KAAK,CAACC,GAAG,CAAC9B,EAAE,IAAI,IAAI,CAACoB,YAAY,CAACpB,EAAE,CAAC,CAAC;IAC/C,OAAOkB,MAAM;EACf;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}